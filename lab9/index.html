<style>
table {
    font-family: Arial, Helvetica, sans-serif;
    border-collapse: collapse;
    width: 100%;
}

td, th {
    border: 1px solid #ddd;
    padding: 6px;
}

tr:nth-child(even) {
    background-color: #f2f2f2;
}

tr:hover {
    background-color: #ddd;
}

th {
    padding-top: 12px;
    padding-bottom: 12px;
    text-align: left;
    background-color: #04AA6D;
    color: white;
}
</style>
<h1>景點觀光展覽資訊</h1>
<table id="csie" class="table table-striped table-hover">
    <tr>
        <th>名稱</th>
        <th>地點</th>
        <th>票價</th>
    </tr>
</table>
<!-- <button onclick="addNewData()">addNewData</button>
<button onclick="deleteData()">deleteData</button> -->

<script>
    // var d = ["資工系", "資工系", "資工系", "資工系", "資工系", "資工系"];
    // var c = ["物件導向軟體設計", "計算機網路實習", "作業系統實習", "生物統計", "通訊系統", "軟硬體專題(2)"];
    // var t = ["黃美源", "字春民", "張哲維", "陳光武", "陳仁暉", "駱詩達"];

    // function addOneData(i) {
    //     var myTable = document.getElementById("csie");
    //     var rowCount = c.length;
    //     var cellCount = myTable.rows[0].cells.length;
    //     var row = myTable.insertRow(-1);
    //     row.insertCell(0).innerHTML = d[i];
    //     row.insertCell(1).innerHTML = c[i];
    //     row.insertCell(2).innerHTML = t[i];
    //     console.log(d[i], c[i], t[i]);
    // }

    // var i = 0;
    // var timer = setInterval(myfunc, 1000, "csie");

    // function myfunc(eid) {
    //     addOneData(i);
    //     if (i++ >= 5) {
    //         clearInterval(timer);
    //     }
    // }

    // function addNewData() {
    //     var myTable = document.getElementById("csie");
    //     var rowCount = d.length;
    //     var cellCount = myTable.rows[0].cells.length;
    //     for (var i = 0; i < rowCount; i++) {
    //         var row = myTable.insertRow(-1);
    //         row.insertCell(0).innerHTML = d[i];
    //         row.insertCell(1).innerHTML = c[i];
    //         row.insertCell(2).innerHTML = t[i];
    //         console.log(d[i], c[i], t[i]);
    //     } 
    // } 
    // function deleteData() {
    //     var myTable = document.getElementById("csie");
    //     var rowCount = myTable.rows.length;
    
    //     // 從最後一行開始刪除，保留表頭
    //     for (var i = rowCount - 1; i > 0; i--) {
    //         myTable.deleteRow(i);
    //     }
    //     console.log("所有資料已刪除");
    // }
    var openUrl = 
  "https://cloud.culture.tw/frontsite/trans/SearchShowAction.do?method=doFindTypeJ&category=6";

var xhr = new XMLHttpRequest();
xhr.open('GET', openUrl, true);
xhr.send();

xhr.onreadystatechange = function(){
  if(this.readyState == 4 && this.status == 200){
    dataset = JSON.parse(this.responseText);
    addNewData(dataset);
  }
};

function addNewData(dataset) {
  var myTable = document.getElementById("csie");
  dataset.forEach(function(data, index) {
    var row = myTable.insertRow(-1);
    row.insertCell(0).innerHTML = data['title'];
    row.insertCell(1).innerHTML = data['showInfo'][0]['location'];
    row.insertCell(2).innerHTML = data['showInfo'][0]['price'];
  });
}


</script>

